<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TextStylr Pro - Advanced Text Formatter</title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        :root {
            --bg-color: #121212;
            --surface-color: #1e1e1e;
            --primary-color: #3b82f6;
            --primary-hover: #2563eb;
            --text-color: #e0e0e0;
            --text-muted: #888888;
            --border-color: #333333;
            --success-color: #22c55e;
        }

        body.light-theme {
            --bg-color: #f0f2f5;
            --surface-color: #ffffff;
            --primary-color: #0a66c2;
            --primary-hover: #08519a;
            --text-color: #1c1e21;
            --text-muted: #606770;
            --border-color: #dddfe2;
            --success-color: #4caf50;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            padding: 2rem;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: var(--surface-color);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo svg {
            width: 32px;
            height: 32px;
            fill: var(--primary-color);
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
        }

        .input-panel, .output-panel {
            padding: 2rem;
            flex: 1;
            min-width: 300px;
        }

        .input-panel {
            border-right: 1px solid var(--border-color);
        }

        h2 {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--bg-color);
            color: var(--text-color);
            resize: vertical;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        #main-input {
            min-height: 200px;
        }

        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }

        .stats {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .btn {
            background-color: var(--surface-color);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s, color 0.2s;
        }

        .btn:hover {
            background-color: var(--primary-color);
            color: var(--surface-color);
        }

        #outputs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .output-card {
            position: relative;
        }

        .output-card textarea {
            min-height: 80px;
        }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            opacity: 0.8;
            transition: opacity 0.2s, background-color 0.2s;
        }

        .output-card:hover .copy-btn {
            opacity: 1;
        }

        .copy-btn.copied {
            background-color: var(--success-color);
        }
        
        /* Snippets */
        #snippets-container { margin-top: 2rem; }
        .snippet-list { list-style: none; margin-top: 1rem; max-height: 150px; overflow-y: auto; padding-right: 10px; }
        .snippet-item { display: flex; justify-content: space-between; align-items: center; background: var(--bg-color); padding: 0.5rem; border-radius: 6px; margin-bottom: 0.5rem; }
        .snippet-text { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: pointer; flex-grow: 1; }
        .snippet-actions button { background: none; border: none; color: var(--text-muted); cursor: pointer; margin-left: 0.5rem; }
        .snippet-actions button:hover { color: var(--primary-color); }

        /* Tabs */
        .tab-nav { display: flex; gap: 1rem; border-bottom: 1px solid var(--border-color); margin-bottom: 1.5rem; }
        .tab-btn { background: none; border: none; color: var(--text-muted); padding: 0.5rem 0; cursor: pointer; font-size: 1rem; border-bottom: 2px solid transparent; }
        .tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* LinkedIn Preview */
        #linkedin-preview { background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; }
        .preview-header { display: flex; align-items: center; gap: 0.75rem; }
        .preview-avatar { width: 50px; height: 50px; border-radius: 50%; background: #555; }
        .preview-user-info { font-size: 0.875rem; }
        .preview-user-info div:first-child { font-weight: 600; color: var(--text-color); }
        .preview-user-info div:last-child { color: var(--text-muted); }
        .preview-content { margin-top: 1rem; white-space: pre-wrap; word-wrap: break-word; line-height: 1.5; }

        /* Theme Switch */
        .theme-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .theme-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 26px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary-color); }
        input:checked + .slider:before { transform: translateX(24px); }

        @media (max-width: 900px) {
            .main-content { flex-direction: column; }
            .input-panel { border-right: none; border-bottom: 1px solid var(--border-color); }
            body { padding: 1rem; }
            header { padding: 1rem; }
            .input-panel, .output-panel { padding: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <header>
            <div class="logo">
                <svg viewBox="0 0 24 24"><path d="M14.2,12.2c-0.2-0.1-0.5-0.2-0.8-0.2c-0.4,0-0.8,0.1-1.1,0.4c-0.3,0.3-0.5,0.6-0.5,1.1c0,0.4,0.2,0.8,0.5,1.1 c0.3,0.3,0.7,0.4,1.1,0.4c0.3,0,0.6-0.1,0.8-0.2c0.2-0.1,0.4-0.3,0.6-0.5l1.4,1.4c-0.4,0.5-0.9,0.9-1.5,1.2c-0.6,0.3-1.3,0.4-2,0.4 c-0.9,0-1.8-0.2-2.5-0.6c-0.7-0.4-1.3-1-1.8-1.7c-0.5-0.7-0.7-1.5-0.7-2.4c0-0.9,0.2-1.7,0.7-2.4c0.5-0.7,1.1-1.3,1.8-1.7 c0.7-0.4,1.6-0.6,2.5-0.6c0.7,0,1.4,0.1,2,0.4c0.6,0.3,1.1,0.7,1.5,1.2l-1.4,1.4C14.6,12.5,14.4,12.3,14.2,12.2z M22,3H2C1.4,3,1,3.4,1,4v16c0,0.6,0.4,1,1,1h20c0.6,0,1-0.4,1-1V4C23,3.4,22.6,3,22,3z M21,19H3V5h18V19z"></path></svg>
                <h1>TextStylr Pro</h1>
            </div>
            <label class="theme-switch">
                <input type="checkbox" id="theme-toggle">
                <span class="slider"></span>
            </label>
        </header>

        <main class="main-content">
            <div class="input-panel">
                <h2>Editor</h2>
                <textarea id="main-input" placeholder="Start typing here to see the magic happen..."></textarea>
                <div class="toolbar">
                    <div class="stats">
                        <span id="char-count">0</span> characters | <span id="word-count">0</span> words
                    </div>
                    <button class="btn" id="clear-btn">Clear</button>
                </div>
                
                <div id="snippets-container">
                    <h2>Saved Snippets</h2>
                    <button class="btn" id="add-snippet-btn">Add New Snippet</button>
                    <ul class="snippet-list" id="snippet-list"></ul>
                </div>
            </div>

            <div class="output-panel">
                <div class="tab-nav">
                    <button class="tab-btn active" data-tab="styled-text">Styled Text</button>
                    <button class="tab-btn" data-tab="preview">LinkedIn Preview</button>
                </div>

                <div id="styled-text" class="tab-content active">
                    <div id="outputs-grid">
                        <!-- Outputs will be generated by JS -->
                    </div>
                </div>

                <div id="preview" class="tab-content">
                    <div id="linkedin-preview">
                        <div class="preview-header">
                            <div class="preview-avatar"></div>
                            <div class="preview-user-info">
                                <div>Your Name</div>
                                <div>Just now â€¢ ðŸŒŽ</div>
                            </div>
                        </div>
                        <div class="preview-content" id="preview-content-area"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM ELEMENTS ---
            const mainInput = document.getElementById('main-input');
            const outputsGrid = document.getElementById('outputs-grid');
            const charCountEl = document.getElementById('char-count');
            const wordCountEl = document.getElementById('word-count');
            const clearBtn = document.getElementById('clear-btn');
            const themeToggle = document.getElementById('theme-toggle');
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            const previewContentArea = document.getElementById('preview-content-area');
            const addSnippetBtn = document.getElementById('add-snippet-btn');
            const snippetList = document.getElementById('snippet-list');

            // --- CHARACTER MAPS ---
            const maps = {
                bold: { 'A': 'ð—”', 'B': 'ð—•', 'C': 'ð—–', 'D': 'ð——', 'E': 'ð—˜', 'F': 'ð—™', 'G': 'ð—š', 'H': 'ð—›', 'I': 'ð—œ', 'J': 'ð—', 'K': 'ð—ž', 'L': 'ð—Ÿ', 'M': 'ð— ', 'N': 'ð—¡', 'O': 'ð—¢', 'P': 'ð—£', 'Q': 'ð—¤', 'R': 'ð—¥', 'S': 'ð—¦', 'T': 'ð—§', 'U': 'ð—¨', 'V': 'ð—©', 'W': 'ð—ª', 'X': 'ð—«', 'Y': 'ð—¬', 'Z': 'ð—­', 'a': 'ð—®', 'b': 'ð—¯', 'c': 'ð—°', 'd': 'ð—±', 'e': 'ð—²', 'f': 'ð—³', 'g': 'ð—´', 'h': 'ð—µ', 'i': 'ð—¶', 'j': 'ð—·', 'k': 'ð—¸', 'l': 'ð—¹', 'm': 'ð—º', 'n': 'ð—»', 'o': 'ð—¼', 'p': 'ð—½', 'q': 'ð—¾', 'r': 'ð—¿', 's': 'ð˜€', 't': 'ð˜', 'u': 'ð˜‚', 'v': 'ð˜ƒ', 'w': 'ð˜„', 'x': 'ð˜…', 'y': 'ð˜†', 'z': 'ð˜‡', '0': 'ðŸ¬', '1': 'ðŸ­', '2': 'ðŸ®', '3': 'ðŸ¯', '4': 'ðŸ°', '5': 'ðŸ±', '6': 'ðŸ²', '7': 'ðŸ³', '8': 'ðŸ´', '9': 'ðŸµ' },
                italic: { 'A': 'ð˜ˆ', 'B': 'ð˜‰', 'C': 'ð˜Š', 'D': 'ð˜‹', 'E': 'ð˜Œ', 'F': 'ð˜', 'G': 'ð˜Ž', 'H': 'ð˜', 'I': 'ð˜', 'J': 'ð˜‘', 'K': 'ð˜’', 'L': 'ð˜“', 'M': 'ð˜”', 'N': 'ð˜•', 'O': 'ð˜–', 'P': 'ð˜—', 'Q': 'ð˜˜', 'R': 'ð˜™', 'S': 'ð˜š', 'T': 'ð˜›', 'U': 'ð˜œ', 'V': 'ð˜', 'W': 'ð˜ž', 'X': 'ð˜Ÿ', 'Y': 'ð˜ ', 'Z': 'ð˜¡', 'a': 'ð˜¢', 'b': 'ð˜£', 'c': 'ð˜¤', 'd': 'ð˜¥', 'e': 'ð˜¦', 'f': 'ð˜§', 'g': 'ð˜¨', 'h': 'ð˜©', 'i': 'ð˜ª', 'j': 'ð˜«', 'k': 'ð˜¬', 'l': 'ð˜­', 'm': 'ð˜®', 'n': 'ð˜¯', 'o': 'ð˜°', 'p': 'ð˜±', 'q': 'ð˜²', 'r': 'ð˜³', 's': 'ð˜´', 't': 'ð˜µ', 'u': 'ð˜¶', 'v': 'ð˜·', 'w': 'ð˜¸', 'x': 'ð˜¹', 'y': 'ð˜º', 'z': 'ð˜»' },
                boldItalic: { 'A': 'ð˜¼', 'B': 'ð˜½', 'C': 'ð˜¾', 'D': 'ð˜¿', 'E': 'ð™€', 'F': 'ð™', 'G': 'ð™‚', 'H': 'ð™ƒ', 'I': 'ð™„', 'J': 'ð™…', 'K': 'ð™†', 'L': 'ð™‡', 'M': 'ð™ˆ', 'N': 'ð™‰', 'O': 'ð™Š', 'P': 'ð™‹', 'Q': 'ð™Œ', 'R': 'ð™', 'S': 'ð™Ž', 'T': 'ð™', 'U': 'ð™', 'V': 'ð™‘', 'W': 'ð™’', 'X': 'ð™“', 'Y': 'ð™”', 'Z': 'ð™•', 'a': 'ð™–', 'b': 'ð™—', 'c': 'ð™˜', 'd': 'ð™™', 'e': 'ð™š', 'f': 'ð™›', 'g': 'ð™œ', 'h': 'ð™', 'i': 'ð™ž', 'j': 'ð™Ÿ', 'k': 'ð™ ', 'l': 'ð™¡', 'm': 'ð™¢', 'n': 'ð™£', 'o': 'ð™¤', 'p': 'ð™¥', 'q': 'ð™¦', 'r': 'ð™§', 's': 'ð™¨', 't': 'ð™©', 'u': 'ð™ª', 'v': 'ð™«', 'w': 'ð™¬', 'x': 'ð™­', 'y': 'ð™®', 'z': 'ð™¯' },
                script: { 'A': 'ð’œ', 'B': 'â„¬', 'C': 'ð’ž', 'D': 'ð’Ÿ', 'E': 'â„°', 'F': 'â„±', 'G': 'ð’¢', 'H': 'â„‹', 'I': 'â„', 'J': 'ð’¥', 'K': 'ð’¦', 'L': 'â„’', 'M': 'â„³', 'N': 'ð’©', 'O': 'ð’ª', 'P': 'ð’«', 'Q': 'ð’¬', 'R': 'â„›', 'S': 'ð’®', 'T': 'ð’¯', 'U': 'ð’°', 'V': 'ð’±', 'W': 'ð’²', 'X': 'ð’³', 'Y': 'ð’´', 'Z': 'ð’µ', 'a': 'ð’¶', 'b': 'ð’·', 'c': 'ð’¸', 'd': 'ð’¹', 'e': 'â„¯', 'f': 'ð’»', 'g': 'â„Š', 'h': 'ð’½', 'i': 'ð’¾', 'j': 'ð’¿', 'k': 'ð“€', 'l': 'ð“', 'm': 'ð“‚', 'n': 'ð“ƒ', 'o': 'â„´', 'p': 'ð“…', 'q': 'ð“†', 'r': 'ð“‡', 's': 'ð“ˆ', 't': 'ð“‰', 'u': 'ð“Š', 'v': 'ð“‹', 'w': 'ð“Œ', 'x': 'ð“', 'y': 'ð“Ž', 'z': 'ð“' },
                boldScript: { 'A': 'ð“', 'B': 'ð“‘', 'C': 'ð“’', 'D': 'ð““', 'E': 'ð“”', 'F': 'ð“•', 'G': 'ð“–', 'H': 'ð“—', 'I': 'ð“˜', 'J': 'ð“™', 'K': 'ð“š', 'L': 'ð“›', 'M': 'ð“œ', 'N': 'ð“', 'O': 'ð“ž', 'P': 'ð“Ÿ', 'Q': 'ð“ ', 'R': 'ð“¡', 'S': 'ð“¢', 'T': 'ð“£', 'U': 'ð“¤', 'V': 'ð“¥', 'W': 'ð“¦', 'X': 'ð“§', 'Y': 'ð“¨', 'Z': 'ð“©', 'a': 'ð“ª', 'b': 'ð“«', 'c': 'ð“¬', 'd': 'ð“­', 'e': 'ð“®', 'f': 'ð“¯', 'g': 'ð“°', 'h': 'ð“±', 'i': 'ð“²', 'j': 'ð“³', 'k': 'ð“´', 'l': 'ð“µ', 'm': 'ð“¶', 'n': 'ð“·', 'o': 'ð“¸', 'p': 'ð“¹', 'q': 'ð“º', 'r': 'ð“»', 's': 'ð“¼', 't': 'ð“½', 'u': 'ð“¾', 'v': 'ð“¿', 'w': 'ð”€', 'x': 'ð”', 'y': 'ð”‚', 'z': 'ð”ƒ' },
                fraktur: { 'A': 'ð”„', 'B': 'ð”…', 'C': 'â„­', 'D': 'ð”‡', 'E': 'ð”ˆ', 'F': 'ð”‰', 'G': 'ð”Š', 'H': 'â„Œ', 'I': 'â„‘', 'J': 'ð”', 'K': 'ð”Ž', 'L': 'ð”', 'M': 'ð”', 'N': 'ð”‘', 'O': 'ð”’', 'P': 'ð”“', 'Q': 'ð””', 'R': 'â„œ', 'S': 'ð”–', 'T': 'ð”—', 'U': 'ð”˜', 'V': 'ð”™', 'W': 'ð”š', 'X': 'ð”›', 'Y': 'ð”œ', 'Z': 'â„¨', 'a': 'ð”ž', 'b': 'ð”Ÿ', 'c': 'ð” ', 'd': 'ð”¡', 'e': 'ð”¢', 'f': 'ð”£', 'g': 'ð”¤', 'h': 'ð”¥', 'i': 'ð”¦', 'j': 'ð”§', 'k': 'ð”¨', 'l': 'ð”©', 'm': 'ð”ª', 'n': 'ð”«', 'o': 'ð”¬', 'p': 'ð”­', 'q': 'ð”®', 'r': 'ð”¯', 's': 'ð”°', 't': 'ð”±', 'u': 'ð”²', 'v': 'ð”³', 'w': 'ð”´', 'x': 'ð”µ', 'y': 'ð”¶', 'z': 'ð”·' },
                monospace: { 'A': 'ð™°', 'B': 'ð™±', 'C': 'ð™²', 'D': 'ð™³', 'E': 'ð™´', 'F': 'ð™µ', 'G': 'ð™¶', 'H': 'ð™·', 'I': 'ð™¸', 'J': 'ð™¹', 'K': 'ð™º', 'L': 'ð™»', 'M': 'ð™¼', 'N': 'ð™½', 'O': 'ð™¾', 'P': 'ð™¿', 'Q': 'ðš€', 'R': 'ðš', 'S': 'ðš‚', 'T': 'ðšƒ', 'U': 'ðš„', 'V': 'ðš…', 'W': 'ðš†', 'X': 'ðš‡', 'Y': 'ðšˆ', 'Z': 'ðš‰', 'a': 'ðšŠ', 'b': 'ðš‹', 'c': 'ðšŒ', 'd': 'ðš', 'e': 'ðšŽ', 'f': 'ðš', 'g': 'ðš', 'h': 'ðš‘', 'i': 'ðš’', 'j': 'ðš“', 'k': 'ðš”', 'l': 'ðš•', 'm': 'ðš–', 'n': 'ðš—', 'o': 'ðš˜', 'p': 'ðš™', 'q': 'ðšš', 'r': 'ðš›', 's': 'ðšœ', 't': 'ðš', 'u': 'ðšž', 'v': 'ðšŸ', 'w': 'ðš ', 'x': 'ðš¡', 'y': 'ðš¢', 'z': 'ðš£', '0': 'ðŸ¶', '1': 'ðŸ·', '2': 'ðŸ¸', '3': 'ðŸ¹', '4': 'ðŸº', '5': 'ðŸ»', '6': 'ðŸ¼', '7': 'ðŸ½', '8': 'ðŸ¾', '9': 'ðŸ¿' }
            };

            const formatters = [
                { name: 'Bold', id: 'bold', type: 'map', map: maps.bold },
                { name: 'Italic', id: 'italic', type: 'map', map: maps.italic },
                { name: 'Bold Italic', id: 'boldItalic', type: 'map', map: maps.boldItalic },
                { name: 'Script', id: 'script', type: 'map', map: maps.script },
                { name: 'Bold Script', id: 'boldScript', type: 'map', map: maps.boldScript },
                { name: 'Fraktur', id: 'fraktur', type: 'map', map: maps.fraktur },
                { name: 'Monospace', id: 'monospace', type: 'map', map: maps.monospace },
                { name: 'Double Underline', id: 'doubleUnderline', type: 'special', func: (text) => text.split('').join('\u0333') },
                { name: 'Strikethrough', id: 'strikethrough', type: 'special', func: (text) => text.split('').join('\u0336') },
            ];

            // --- INITIALIZE UI ---
            function initializeOutputs() {
                formatters.forEach(formatter => {
                    const card = document.createElement('div');
                    card.className = 'output-card';
                    card.innerHTML = `
                        <label for="${formatter.id}-output">${formatter.name}</label>
                        <textarea id="${formatter.id}-output" readonly></textarea>
                        <button class="copy-btn" data-target="${formatter.id}-output">Copy</button>
                    `;
                    outputsGrid.appendChild(card);
                });
            }
            initializeOutputs();

            // --- CORE FUNCTIONS ---
            function convertText(text, map) {
                return text.split('').map(char => map[char] || char).join('');
            }

            function updateAllOutputs() {
                const text = mainInput.value;

                formatters.forEach(formatter => {
                    const outputEl = document.getElementById(`${formatter.id}-output`);
                    if (formatter.type === 'map') {
                        outputEl.value = convertText(text, formatter.map);
                    } else if (formatter.type === 'special') {
                        outputEl.value = formatter.func(text);
                    }
                });

                // Update stats
                charCountEl.textContent = text.length;
                wordCountEl.textContent = text.trim().split(/\s+/).filter(Boolean).length;

                // Update preview
                previewContentArea.textContent = text;
            }

            // --- SNIPPETS LOGIC ---
            let snippets = JSON.parse(localStorage.getItem('textStylrSnippets')) || [];

            function saveSnippets() {
                localStorage.setItem('textStylrSnippets', JSON.stringify(snippets));
            }

            function renderSnippets() {
                snippetList.innerHTML = '';
                if (snippets.length === 0) {
                    snippetList.innerHTML = '<li style="color: var(--text-muted); font-style: italic;">No snippets saved yet.</li>';
                    return;
                }
                snippets.forEach((snippet, index) => {
                    const li = document.createElement('li');
                    li.className = 'snippet-item';
                    li.innerHTML = `
                        <span class="snippet-text" title="Click to insert">${snippet}</span>
                        <div class="snippet-actions">
                            <button class="delete-snippet-btn" data-index="${index}" title="Delete snippet"><i class="fas fa-trash-alt"></i></button>
                        </div>
                    `;
                    li.querySelector('.snippet-text').addEventListener('click', () => {
                        mainInput.value += snippet;
                        updateAllOutputs();
                    });
                    snippetList.appendChild(li);
                });
            }

            addSnippetBtn.addEventListener('click', () => {
                const newSnippet = prompt('Enter the text for your new snippet:');
                if (newSnippet && newSnippet.trim() !== '') {
                    snippets.push(newSnippet);
                    saveSnippets();
                    renderSnippets();
                }
            });

            snippetList.addEventListener('click', (e) => {
                if (e.target.closest('.delete-snippet-btn')) {
                    const index = e.target.closest('.delete-snippet-btn').dataset.index;
                    if (confirm('Are you sure you want to delete this snippet?')) {
                        snippets.splice(index, 1);
                        saveSnippets();
                        renderSnippets();
                    }
                }
            });

            // --- THEME LOGIC ---
            function applyTheme(theme) {
                if (theme === 'light') {
                    document.body.classList.add('light-theme');
                    themeToggle.checked = false;
                } else {
                    document.body.classList.remove('light-theme');
                    themeToggle.checked = true;
                }
            }

            themeToggle.addEventListener('change', () => {
                const theme = themeToggle.checked ? 'dark' : 'light';
                localStorage.setItem('textStylrTheme', theme);
                applyTheme(theme);
            });

            // --- TAB LOGIC ---
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab).classList.add('active');
                });
            });

            // --- EVENT LISTENERS ---
            mainInput.addEventListener('input', updateAllOutputs);
            clearBtn.addEventListener('click', () => {
                mainInput.value = '';
                updateAllOutputs();
            });

            outputsGrid.addEventListener('click', (e) => {
                if (e.target.classList.contains('copy-btn')) {
                    const button = e.target;
                    const targetId = button.dataset.target;
                    const textarea = document.getElementById(targetId);
                    navigator.clipboard.writeText(textarea.value).then(() => {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    });
                }
            });

            // --- INITIAL LOAD ---
            const savedTheme = localStorage.getItem('textStylrTheme') || 'dark';
            applyTheme(savedTheme);
            renderSnippets();
        });
    </script>
</body>
</html>
